{{- $fullName := include "application.fullname" . -}}
{{- $labels := include "application.labels" . | nindent 4  -}}
{{- range $containerIndex, $container := .Values.containers }}
{{- range $fileIndex, $file := $container.files }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ $fullName }}-configmap-files-{{ $containerIndex }}-{{ $fileIndex }}
  labels:
    {{- $labels }}
data:
  {{ regexFind "[^/]+$" $file.path }}: {{ $file.content }}
{{- end -}}
{{- end -}}
